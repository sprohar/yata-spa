<h1 class="p1">Today</h1>

<main class="flex-column row-gap-1 mt-1">
  <mat-expansion-panel *ngIf="tasks$ | async as tasks" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <span>{{ today | date : "fullDate" }}</span>
        &nbsp;
        <span>({{ tasks.length }})</span>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <yata-task-list>
      <ng-container *ngFor="let task of tasks; trackBy: trackByTaskId">
        <ng-container
          *ngIf="
            userPreferences?.taskView === TASK_VIEW_MINIMALIST;
            else informative
          "
        >
          <yata-task [task]="task" [isDraggable]="false">
            <yata-task-options [task]="task"></yata-task-options>
          </yata-task>
        </ng-container>
        <ng-template #informative>
          <yata-task-informative [task]="task" [isDraggable]="false">
            <yata-task-options [task]="task"></yata-task-options>
          </yata-task-informative>
        </ng-template>
        <mat-divider></mat-divider>
      </ng-container>
    </yata-task-list>
  </mat-expansion-panel>
</main>

<router-outlet></router-outlet>
